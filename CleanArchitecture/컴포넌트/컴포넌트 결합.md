# 컴포넌트 결합



### 컴포넌트 사이의 관계를 설명하는 3가지 원칙

### ADP(의존성 비순환 원칙): 컴포넌트 의존성 그래프에 순환이 있어서는 안된다.

의존성 그래프에 순환이 있는 경우 다른 누군가 내가 작업을 종료한 후 의존하고 있던 무언가를 수정했다면 문제가 생긴다

![그림 14.2 순환 의존성](https://uchanlee.dev/static/6005b83720c2dd84929d83b923528691/0a47e/image-14.2.png)

위 그래프에는 순환이 존재한다.

##### 해결책

* 개발 환경을 릴리즈가 가능한 컴포넌트 단위로 분리한다.
  컴포넌트가 동작하도록 만든 후 해당 컴포넌트를 릴리즈 한다.
  -> 다른 팀에서는 새 릴리즈를 적용 할지만 결정하면 된다.

* 의존성 역전(DIP)을 적용한다.
  ![그림 14.3 Entities와 Authorizer 사이의 의존성을 역전시킨다.](https://uchanlee.dev/static/7f579cd6cb89c723fb56ee99dd4f20e5/0a47e/image-14.3.png)

  User가 필요로 하는 메서드를 제공하는 인터페이스를 생성한다.
  이 인터페이스는 Entities에 위치시키고, Authorizer에서는 이 인터페이스를 상속받는다

* Entities 와 Authorizer가 모두 의존하는 새로운 컴포넌트를 만든다.
  ![그림 14.4 Entities와 Authorizer 모두 의존하는 새로운 컴포넌트](https://uchanlee.dev/static/cc4bf0149d4882dab49d48b7fb723da1/0a47e/image-14.4.png)



### SDP(안정된 의존성 원칙): 안정성의 방향으로 의존하라.

* 변동성을 지니도록 설계한 컴포넌트는 언젠가 변경되리라 예상한다.
* 변경이 쉽지않은 컴포넌트가 변동이 예상되는 컴포넌트에 의존하게 만들어서는 안된다.

##### 안정성: 변경을 만들기 위해 필요한 작업량(쉽게 움직이지 않는 것)

* 소프트웨어의 컴포넌트를 변경하기 어렵게 만드는 확실한 방법 하나는 수많은 컴포넌트가 해당 컴포넌트에 의존하게 만드는 것이다.

  ![그림 14.5 X는 안정된 컴포넌트다.](https://uchanlee.dev/static/944a6939b6e513b116ce684a437dd176/0a47e/image-14.5.png)

  안정된 컴포넌트이다.

  세 컴포넌트가 X에 의존하고 있기 때문에 변경하지 말아야 할 이유가 세가지이다.

  X는 어디에도 의존하지 않으므로 X가 변경되도록 만들 수 있는 외적인 영향이 전혀 없다. 이 경우 X는 독립적이다 라고 말한다.


  ![그림 14.6 Y는 상당히 불안정한 컴포넌트다.](https://uchanlee.dev/static/edce24d78ce38e44183288b4dad71ec0/0a47e/image-14.6.png)

  Y는 불완전한 컴포넌트이다.

  어떤 컴포넌트도 Y에 의존하지 않기 때문에 Y는 책임성이 없다고 말할 수 있다.

  Y는 세게의 컴포넌트에 의존하기 때문에 변경이 발생할 수 있는 외부요인이 3가지이다.

  Y는 의존적이다.

* 안정성지표
  컴포넌트가 들어오고 나가는 의존성의 개수로 안정성을 숫자화 한 것

### SAP(안정된 추상화 원칙): 컴포넌트는 안정된 정도만큼 추상화되어야 한다.

##### 안정된 추상화 원칙

안정된 추상화 원칙은 안정성과 추상화 정도 사이의 관계를 정의한다.

* 안정된 컴포넌트는 추상컴포넌트여야 하고, 안정성이 컴포넌트를 확장하는 일을 방해해서느 안된다.
* 불안정한 컴포넌트는 반드시 구체 컴포넌트여야 하며, 불안정하므로 컴포넌트 내부의 구체적인 코드를 쉽게 변경할 수 있어야 하기 때문이다.
* 안정적인 컴포넌트라면 반드시 인터페이스와 추상클래스로 구성되어 쉽게 확장할 수 있어야 한다.

